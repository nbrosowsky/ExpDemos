<!DOCTYPE html>
<html dir="ltr" lang="en-US">

<head>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="N.P. Brosowsky" content="Typing Game" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Stylesheets
	============================================= -->
    <link rel="stylesheet" href="css/task.css" type="text/css" />

    <!--- Javascript on page load
	============================================= -->

    <!-- Document Title
	============================================= -->
    <title>Typing Game</title>

</head>


<body>
    <div id="landingContainer">
        <header>
            <div class="consentWrapper" style="margin-left: 20% !important">
                <h1 class="headerText">Reaction Time Game</h1>
            </div>
        </header>


        <div id="landing">
            <h2>Task Overview</h2>
            <hr>
            <p><strong>Time:</strong> This task takes approximately 20-30 minutes.</p>
            <p><strong>Compensation:</strong> You will be compensated $3.50 for completing the hit.</p>
            <p><strong>Task:</strong>Type a briefly presented word as quickly and accurately as possible. There will be 315 total trials. </p>
            <p><strong>Preview:</strong> You can preview this hit by continuing without accepting the hit. </p>
            <p><em>To complete the hit you must accept the hit before continuing.</em> Close the practice window, then accept the hit on the main window to continue.</p>
            <hr>
            <p><strong>Instructions:</strong></p>

            <p>On every trial you'll see two words presented briefly, one after the other. Your task is to type the <strong>second</strong> word as quickly and as accurately as possible. Your typing will appear below the target word. To submit your response, you will press the spacebar.
            </p>
            <p> For example: </p>
            <p><img src="images/example.png" width="75%" />
            </p>
            <p>Once you submit your response (by pressing spacebar) you will automatically proceed to the next trial.</p>


            <p><strong>This experiment requires a pop-window to be full-screen. At the end of the experiment the window will automatically close and return you to amazon where you can submit the hit.</strong></p>
            <hr>


            <p><strong><em>*Please read the consent form below that explains your rights as a human participant in research</em></strong>
            </p>

            <div id="Consent">
                <div id="consentWrapper">
                    <h1 class="headerText">Brooklyn College of CUNY - Informed Consent Form</h1>
                </div>

                <h2><strong>Title:</strong> Cognitive processes in motor control</h2>
                <h2><strong>Principal Investigator:</strong> Dr. Matthew Crump - Psychology Department</h2>
                <hr>

                <p><strong>Purpose of the Research Study:</strong> The research is being conducted to gain more knowledge about the cognitive processes involved in highly trained skills, such as typing, that require people to rapidly order actions in a goal-directed fashion.</p>

                <p><strong>Procedures:</strong> The experiment will involve one session lasting approximately 20-30 minutes. The specific task may vary and could involved the following:</p>
                <ol>
                    <li>Perform typing tasks. Tasks involve being presented with a visual stimulus and making a typing response. The visual stimulus could be a word, a letter, a string of letters, or a picture. You will be required to make a response to the target by using the computer keyboard. Unless instructed otherwise please be as quick and accurate as possible when making responses.</li>
                </ol>
                <ul style="list-style-type: none">
                    <li>
                        <strong><em>*Note that sometimes the backspace or delete key may not function during the task.</em></strong>
                    </li>
                    <li>
                        <em><strong>**This task is only for people who are fluent in English.</strong></em>
                    </li>
                </ul>




                <p><strong style="display: inline;">Risks/Discomforts:</strong> There are no risks for participating in this study beyond those associated with normal computer use.</p>


                <p><strong>Benefits:</strong> Although it will not directly benefit you, this study will advance basic science on the cognitive processes involved in motor control. This could lead to better training curriculum for improving skills like typing and playing musical instruments.</p>


                <p><strong>Voluntary participation and right to withdraw:</strong> Participation in this study is voluntary, and you can stop at any time without penalty. To stop, click on the "Return HIT" button, or close your browser window.</p>


                <p><strong>Confidentiality:</strong> The only identifying information kept based on your participation in this study will be your Amazon Mechanical Turk WorkerID serial number. This is automatically recorded.</p>


                <p><strong>Compensation:</strong> If you satisfactorily complete the study, you will receive $3.50. Payments are made via Amazon's payment system.</p>

                <p><strong>Questions or Concerns:</strong> You can ask questions about this research study now or any time during the study by e-mailing Nick Brosowsky at
                    <a href="mailto:nbrosowsky@gradcenter.cuny.edu?Subject=Typing%20Skills%20Game" target="_top">nbrosowsky@gradcenter.cuny.edu</a></p>

                <p>If you have questions about your rights as a research participant or feel that you have not been treated fairly, please contact the Brooklyn College Human Research Protection Program Office at 718-951-5000 x 3829, or email<a href="mailto:irb@brooklyn.cuny.edu" target="_top"> irb@brooklyn.cuny.edu</a></p>
                <hr>

                <h2>Clicking Accept</h2>

                <p>By clicking on the "Accept HIT" button, you indicated that you agree to participate in the study and that you understand the information in this consent form. You agree that you are at least 18 years of age. You have not waived any legal rights you otherwise would have as a participant in a research study.</p>
                <hr style="margin-bottom: 50px">

            </div>

            <p class="flexCenter">
                <button id="trial" class="button-green" onclick="basicPopup('task.html');return false">Start Task: press accept hit before starting</button>
            </p>
        </div>

        <div id="explorerInst" class="initHidden">
            <p> </p>
            <p>This experiment will not run properly using Safari. Please use one of the following browsers, we recommend Chrome:</p>
            <p color="white"><a href="https://www.microsoft.com/">Explorer</a></p>
            <p><a href="http://www.google.com/chrome/">Chrome</a></p>
            <p><a href="http://www.mozilla.org">Firefox</a></p>
            <p> </p>
        </div>

        <div id="endExp">
            <div id="debrief" style="display: none">
                <p id='error' style="display:none">There was an error submitting your data. Please try submitting again.</p>
                <h1>Experimental Debriefing</h1>
                <!-- only submit form if accessed through mTurk -->
                <form id="mturk_form" method="POST" action="https://www.mturk.com/mturk/externalSubmit" onsubmit="return !mTurk.turkInfo().outsideTurk">

                    <h3>Thank you for participating in our experiment! </h3>
                    <p class="spaceBelow">This document serves as short description of the purposes behind our experiment.</p>
                    <p class="spaceBelow">
                        The general purpose of this study is to investigate how memory is influenced by word-meaning and the semantic relationships between words.
                    </p>
                    <p>
                        In the first part of the experiment you completed a spatial attention task. Each target word was preceeded by a context-word that was either the same, similar, or different than the target word. Later, your memory was tested on all the target words. Some work has shown that resolving conflicting information might help memory. Here, we were interested in examining how the relationships between the context and target words helped or hindered your later memory for the target words.
                    </p>


                    <h3 class="spaceAbove spaceBelow">You have completed the Experiment. Please submit your Hit</h3>

                    <p><em><strong>If you would like to leave a comment, or report a problem use the form below before submitting:</strong></em></p>

                    <input type="hidden" id="assignmentId" name="assignmentId" value="">
                    <textarea name="Comments" id="Comments" style="font-size:18px"> </textarea>

                    <!-- always submit data to firebase -->
                    <input id="submit" type="submit" name="Submit" value="Submit" class="button-green" style="display:none"> <br />
                    <input id="collect" value="Submit" class="button-green" style="text-align: center"> <br />
                    <input id="data" type="text" name="data" style="display: none"><br />

                </form>

            </div>
            <div id="success" style="display: none">
                <h1>Data Successfully Submitted!</h1>
                <p>Your data has been submitted and you can now close the window.</p>
            </div>
        </div>


        <script src="https://www.gstatic.com/firebasejs/4.8.2/firebase.js"></script>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyBtx3W8EZZi-TsCdY2tAoGXdjSyLr2L0FM",
                authDomain: "beagle-3fbdd.firebaseapp.com",
                databaseURL: "https://beagle-3fbdd.firebaseio.com",
                projectId: "beagle-3fbdd",
                storageBucket: "",
                messagingSenderId: "514895260633"
            };
            firebase.initializeApp(config);
            firebase.auth().signInAnonymously().catch(function(error) {
                var errorCod = error.code;
                var errorMessage = error.message;
            });

            var userID, isAnonymous
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    isAnonymous = user.isAnonymous
                    userID = user.uid;
                    console.log("you are logged in");
                } else {
                    console.log("you are not logged in")
                }
            });

        </script>

        <script type="text/javascript" src="js/external/jquery-3.1.1.min.js"></script>
        <script type="text/javascript" src="js/common/mTurk.js"></script>
        <script type="text/javascript" src="js/common/generic.js"></script>
        <script type="text/javascript">
            // Check if the worker is PREVIEWING the HIT or if they've ACCEPTED the HIT
            document.getElementById('assignmentId').value = mTurk.turkInfo().assignmentId;


            if (mTurk.turkInfo().assignmentId == "ASSIGNMENT_ID_NOT_AVAILABLE") {
                // If we're previewing, disable the button and give it a helpful message
                document.getElementById('submitButton').disabled = true;
                document.getElementById('submitButton').value = "You must ACCEPT the HIT before you can submit the results.";
            } else {
                var form = document.getElementById('mturk_form');
                if (document.referrer && (document.referrer.indexOf('workersandbox') != -1)) {
                    form.action = "https://workersandbox.mturk.com/mturk/externalSubmit";
                }
            }




            var data = {};
            $("#success").hide();


            //hides the landing page info and shows the end of experiment information//
            function endofExp() {
                $("#landing").hide();
                $("#debrief").show();
            }


            $('#collect').click(function() {
                //add comments to dataframe
                for (i = 0; i <= data.length - 1; i++) {
                    data[i].comments = $("#Comments").val().replace(/(\r\n|\n|\r)/gm, ' ')
                }

                //submit to FireBase
                firebase.database().ref(userID).set(data).then(function() {

                    //convert data to text and add to form
                    $("#data").val(JSON.stringify(data));


                    $("#debrief").hide();
                    $("#success").show();

                    firebase.auth().signOut().then(function() {
                        console.log('Signed Out');
                    }, function(error) {
                        console.error('Sign Out Error', error);
                    });

                }, function(error) {
                    console.error('Firebase error. Data not sent', error);
                    $("#error").show();
                    
                });

                $("#mturk_form").submit();

            });

        </script>

</body>
